<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Stephen Tudor">
        <title>Gulp and Browserify | Stephen Tudor</title>
        <style id="critical">*{margin:0;padding:0}li{margin-left:5%}.clear{clear:both;font-size:1px;height:1px;line-height:1px}a img{border:none}.title,h1,h2{font-weight:400}.links a{font-size:2em;line-height:45px}.toplink{color:#313131;margin-right:15px;text-decoration:none}.textwidget a.underline{text-decoration:underline}.title{color:#333;font-size:2em;margin-top:1.3em}body{align:center;color:#444;font-family:"Lucida Grande","Lucida Sans Unicode","Lucida Sans",Verdana,Arial,sans-serif;font-size:.9375em}.inside{margin:0 auto;max-width:72em;width:86%}h1,h2{margin:1.5em 0 0}h1{color:#CCC;font-size:1.8em}h2{color:#FFF;font-size:1.6em}p{font-size:1.1em;line-height:1.75em}#primary{padding:1px 0 2em;word-break:break-word}#header .inside{padding-bottom:1em;padding-top:1em}#header h2{float:left;font-size:2.25em;margin:0 .5em 0 0;padding:0 .2em .25em 0}#header #me+.links{clear:left}#ancillary{padding:2em 0 0}#ancillary .textwidget,small{font-size:.9em}#ancillary .block h2{font-size:1.3em;margin:0 0 2em}.widget ul{border-top:1px solid #C0E0E2;list-style-type:none;margin:1.5em 0 2em}.widget ul li{border-bottom:1px solid #C0E0E2;list-style-type:none;margin:0;padding:.5em 0}.links,.widget ul a{color:#404040;font-size:1.03em;text-decoration:none}.top-search-icon{opacity:.4}#ancillary,body{background:#E5F6F7}a,.story .details a,.story .details a:hover{color:#222}h1,h2,p,ul{margin:1em0}#header.links{float:left}#header.top-search-icon{float:right}.feed{font-size:1.2em}#headerh2a{text-decoration:none}a{color:#FFF}#header#mea{display:block}h1,h2{color:#222}#header,#primary{background:#FFF}</style>
        <!-- <style id="icons">@font-face{font-family:icomoon;src:url(/fonts/icomoon.eot?klzpen);src:url(/fonts/icomoon.eot?#iefixklzpen) format('embedded-opentype'),url(/fonts/icomoon.ttf?klzpen) format('truetype'),url(/fonts/icomoon.woff?klzpen) format('woff'),url(/fonts/icomoon.svg?klzpen#icomoon) format('svg');font-weight:400;font-style:normal}[class^=icon-]{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:icomoon;font-style:normal;font-variant:normal;font-weight:400;line-height:1;speak:none;text-transform:none}.icon-search:before{content:"\e604"}.icon-mail:before{content:"\e600"}.icon-twitter:before{content:"\e601"}.icon-feed:before{content:"\e605"}.icon-github:before{content:"\e602"}.icon-linkedin:before{content:"\e603"}</style> -->
        <noscript id="deferred-styles">
            <link rel="stylesheet" type="text/css" href="/css/main.css">
            <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/github.min.css">
        </noscript>
        <script>
            var loadDeferredStyles = function() {
                var addStylesNode = document.getElementById("deferred-styles");
                var replacement = document.createElement("div");
                replacement.innerHTML = addStylesNode.textContent;
                document.body.appendChild(replacement)
                addStylesNode.parentElement.removeChild(addStylesNode);
            };
            var raf = requestAnimationFrame || mozRequestAnimationFrame ||
                webkitRequestAnimationFrame || msRequestAnimationFrame;
            if (raf) raf(function() { window.setTimeout(loadDeferredStyles, 0); });
            else window.addEventListener('load', loadDeferredStyles);
        </script>
        <link rel="alternate" type="application/rss+xml" href="/rss.xml" />
        <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
    </head>
    <body>
        <div id="header">
            <div class="inside nocontent">
                <div id="me"><h2><a href="/" title="Stephen Tudor"><img src="/images/smt.io-logo-black-121x55.png" alt="smt.io" /></a></h2></div>
                <div class="links">
                    <a id="email" class="toplink" target="_blank"><span class="icon-mail"></span></a>
                    <a href="http://www.linkedin.com/in/smtudor" class="toplink" target="_blank"><span class="icon-linkedin"></span></a>
                    <a href="http://github.com/smt/" class="toplink" target="_blank"><span class="icon-github"></span></a>
                    <a href="http://twitter.com/tagsoup" class="toplink" target="_blank"><span class="icon-twitter"></span></a>
                </div>
                <div class="links top-search-icon">
                    <a href="/search.html" class="toplink"><span class="icon-search"></span></a>
                </div>
                <div class="clear"></div>
            </div>
        </div>

        <div id="primary">
    <div class="inside">
        <h1 class="title">Gulp and Browserify</h1>
        <div class="opacity08"><small>
                <i>February 11, 2014 / <a href="/label/javascript/">JavaScript</a>, <a href="/label/mad-coding/">Mad Coding</a>, <a href="/label/node/">Node.js</a></i>
        </small></div>
        <br>
        <p>Just a quick write-up of some things I’ve been playing with lately.</p>
<p>A few weeks ago, at lunch with some old coworkers, someone mentioned that <a href="http://gulpjs.com">gulp</a> might just be the new hotness that steals Grunt’s thunder. More recently, I was inspired by <a href="http://www.100percentjs.com/just-like-grunt-gulp-browserify-now/">Martin Genev</a> to look into the gulp build system and <a href="http://browserify.com">Browserify</a>. I’m pretty impressed with what I’ve seen of gulp thus far, but I feel the bigger story by far is Browserify.</p>
<p><strong>Update (2014-04-09):</strong> <a href="http://viget.com/about/team/dtello">Dan Tello</a> has posted a <a href="http://viget.com/extend/gulp-browserify-starter-faq">far superior contribution</a> on this topic. The examples he gives are really compelling.</p>
<h2 id="gulp">gulp</h2>
<p>I’ve been on several projects now that use the Grunt build system, and I’m not trying to criticize Grunt – in many ways, it was a Godsend that saved us from the hell of Makefiles and build.xml files. However, I always found configuring Grunt to be a major chore, and I was always bad at it. The up-front configuration work can be pretty intimidating.</p>
<p>In contrast, <a href="http://gulpjs.com">gulp</a> uses conventions similar to node.js streams. I’m no expert with using streams myself, but to be able to pipe operations into other operations, Unix-style, is quite intuitive. Writing a task in gulp is nearly as simple and natural as pseudo-coding what you want it to do.</p>
<p>In this example, I defined a task to build and concatenate my JavaScript source into a single file (dist/built.js), adding a file watcher for good measure. Nice!</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> gulp <span class="op">=</span> <span class="at">require</span>(<span class="st">'gulp'</span>)<span class="op">;</span>
<span class="kw">var</span> util <span class="op">=</span> <span class="at">require</span>(<span class="st">'gulp-util'</span>)<span class="op">;</span>
<span class="kw">var</span> concat <span class="op">=</span> <span class="at">require</span>(<span class="st">'gulp-concat'</span>)<span class="op">;</span>
<span class="kw">var</span> browserify <span class="op">=</span> <span class="at">require</span>(<span class="st">'gulp-browserify'</span>)<span class="op">;</span>

<span class="va">gulp</span>.<span class="at">task</span>(<span class="st">'scripts'</span><span class="op">,</span> <span class="kw">function</span> (cb) <span class="op">{</span>
    <span class="va">gulp</span>.<span class="at">src</span>(<span class="st">'./src/app.js'</span>)
        .<span class="at">pipe</span>(<span class="at">browserify</span>(<span class="op">{</span>
            <span class="dt">basedir</span><span class="op">:</span> <span class="st">'./'</span><span class="op">,</span>
            <span class="dt">debug</span><span class="op">:</span> <span class="op">!</span><span class="va">util</span>.<span class="va">env</span>.<span class="at">production</span>
        <span class="op">}</span>))
        .<span class="at">pipe</span>(<span class="at">concat</span>(<span class="st">'built.js'</span>))
        .<span class="at">pipe</span>(<span class="va">gulp</span>.<span class="at">dest</span>(<span class="st">'./dist/'</span>))
<span class="op">}</span>)<span class="op">;</span>

<span class="va">gulp</span>.<span class="at">task</span>(<span class="st">'watch'</span><span class="op">,</span> [<span class="st">'scripts'</span>]<span class="op">,</span> <span class="kw">function</span> () <span class="op">{</span>
    <span class="kw">var</span> watcher <span class="op">=</span> <span class="va">gulp</span>.<span class="at">watch</span>(<span class="st">'./src/**/*.js'</span><span class="op">,</span> [<span class="st">'scripts'</span>])<span class="op">;</span>
    <span class="va">watcher</span>.<span class="at">on</span>(<span class="st">'change'</span><span class="op">,</span> <span class="kw">function</span> (event) <span class="op">{</span>
        <span class="va">console</span>.<span class="at">log</span>(<span class="st">'File '</span> <span class="op">+</span> <span class="va">event</span>.<span class="at">path</span> <span class="op">+</span> <span class="st">' was '</span> <span class="op">+</span> <span class="va">event</span>.<span class="at">type</span> <span class="op">+</span> <span class="st">', building scripts...'</span>)<span class="op">;</span>
    <span class="op">}</span>)<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span>

<span class="va">gulp</span>.<span class="at">task</span>(<span class="st">'default'</span><span class="op">,</span> [<span class="st">'scripts'</span><span class="op">,</span> <span class="st">'watch'</span>])<span class="op">;</span></code></pre></div>
<h2 id="browserify">Browserify</h2>
<p>I honestly don’t think I can do <a href="http://browserify.com">Browserify</a> any justice by attempting to explain it here, but it’s basically a library that allows you to use core node modules, npm modules, and your own modules written in node.js style <strong>in the browser</strong>.</p>
<p>I’ve been a proponent of AMD and RequireJS for some time, but when it comes to writing modules in JavaScript, here’s my big question: Why not use the same conventions for the browser as for node.js, with minimal, if any, boilerplate needed?</p>
<p>Browserify lets you do that. I wrote 3 or 4 modules, using node.js-style <code>require</code> statements for dependencies, and exposing what I needed to with <code>module.exports</code>. With very little configuration (see the gulpfile.js example above), Browserify wrapped all my modules appropriately, and built them to a single JS file, which I loaded in the browser. It worked. It was glorious. The blinders were off.</p>
<p>My experience with Browserify thus far has only been with modules I’ve written myself. I haven’t even scratched the surface of using an npm module in the browser yet. That will be my next experiment. I’m genuinely excited.</p>
    </div>
</div>

<hr class="hide">

<div id="secondary">
    <div class="inside">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            // /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            // var disqus_shortname = 'stephentudor'; // required: replace example with your forum shortname

            // /* * * DON'T EDIT BELOW THIS LINE * * */
            // (function() {
            //     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            //     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            //     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            // })();
        </script>
        <!-- <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->
    </div>
</div>
<hr class="hide">


        <div id="ancillary">
            <div class="inside nocontent">
                <div class="block first">
                    <div class="widget">
                        <h2>Pages</h2>
                        <div class="menu-pages-container">
                            <ul id="menu-pages" class="menu">
                                <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/about/">About Me</a></li>
                                <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/blog/page/1/">Writing</a></li>
                                <!-- <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/past-personal-projects/">Past Personal Projects</a></li> -->
                            </ul>
                        </div>
                    </div>

                    <div class="widget">
                        <div class="textwidget">
                            <small>
                                This site is written in Haskell &amp; powered by <a href="http://jaspervdj.be/hakyll/" class="links underline">Hakyll</a>.
                                See <a href="https://github.com/smt/hakyll-blog/blob/master/site.hs" class="links underline">github</a> for source code.
                            </small>
                        </div>
                    </div>

                    <div class="widget">
                        <br>
                        <a href="/rss.xml" class="toplink feed" target="_blank"><span class="icon-feed"></span></a>
                    </div>
                </div>

                <div class="block second">
                    <div class="widget">
                        <h2>Recent Posts</h2>
                        <ul>
                            <li><a href="/2016/05/02/putting-aside-the-ranger/" title="Putting Aside the Ranger">Putting Aside the Ranger</a></li>
<li><a href="/2016/04/24/intervening-years/" title="The Intervening Years">The Intervening Years</a></li>
<li><a href="/2014/02/11/gulp-browserify/" title="Gulp and Browserify">Gulp and Browserify</a></li>
<li><a href="/2012/12/19/emergent-task-planner/" title="Emergent Task Planner">Emergent Task Planner</a></li>
<li><a href="/2012/12/17/year-in-review/" title="2012: Year In Review">2012: Year In Review</a></li>
<li><a href="/2012/10/07/developers-are-artists/" title="Developers Are Artists">Developers Are Artists</a></li>
<li><a href="/2012/01/10/kss-middleman/" title="KSS and Middleman">KSS and Middleman</a></li>
<li><a href="/2011/08/04/10-vim-techniques-for-novices/" title="10 Vim Techniques for Novices">10 Vim Techniques for Novices</a></li>
<li><a href="/2011/07/17/oocss-for-great-justice/" title="OOCSS, For Great Justice">OOCSS, For Great Justice</a></li>
<li><a href="/2011/07/09/responsible-sass-authoring/" title="Responsible Sass Authoring">Responsible Sass Authoring</a></li>

                        </ul>
                    </div>
                    <!-- <div class="widget">
                        <div class="textwidget">
                            <a href="/blog/page/2/" class="readmore">more...</a>
                        </div>
                    </div> -->
                </div>

                <div class="block third">
                    <div class="widget">
                        <h2>Labels</h2>
                        <ul>
                            <!-- <li class="cat-item"><a href="/label/board-games/" title="View all posts filed under Board Games">Board Games</a></li> -->
                            <li class="cat-item"><a href="/label/css/" title="View all posts filed under CSS">CSS</a></li>
                            <!-- <li class="cat-item"><a href="/label/guitar/" title="View all posts filed under Guitar">Guitar</a></li> -->
                            <li class="cat-item"><a href="/label/javascript/" title="View all posts filed under JavaScript">JavaScript</a></li>
                            <!-- <li class="cat-item"><a href="/label/linux-unix/" title="View all posts filed under Linux/Unix">Linux/Unix</a></li> -->
                            <li class="cat-item"><a href="/label/mad-coding/" title="View all posts filed under Mad Coding">Mad Coding</a></li>
                            <li class="cat-item"><a href="/label/miscellaneous/" title="View all posts filed under Miscellaneous">Miscellaneous</a></li>
                            <li class="cat-item"><a href="/label/productivity/" title="View all posts filed under Productivity">Productivity</a></li>
                            <!-- <li class="cat-item"><a href="/label/security/" title="View all posts filed under Security">Security</a></li> -->
                            <li class="cat-item"><a href="/label/vim/" title="View all posts filed under Vim">Vim</a></li>
                        </ul>
                    </div>
                </div>

                <div class="clear"></div>
            </div>
        </div>
        <hr class="hide">
        <br class="clear">

        <script src="/js/highlight.js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="/js/main.js" async></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-76836369-1', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>
