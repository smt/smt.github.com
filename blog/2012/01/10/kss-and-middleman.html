
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>KSS and Middleman - The Tude Abides</title>
  <meta name="author" content="Stephen Tudor">

  
  <meta name="description" content="I love the idea of building an &ldquo;interactive style guide&rdquo; for a website
design. I really do. However, working in Agencyland, it can be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stephentudor.com/blog/2012/01/10/kss-and-middleman.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="" rel="alternate" title="The Tude Abides" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-545908-14']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Tude Abides</a></h1>
  
    <h2>A personal log of web developer Stephen Tudor</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:stephentudor.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives/index.html">Archives</a></li>
  <li><a href="/colophon.html">Colophon</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">KSS and Middleman</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-10T15:11:00-05:00" pubdate data-updated="true">Jan 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I love the idea of building an &ldquo;interactive style guide&rdquo; for a website
design.  I really do. However, working in Agencyland, it can be
extremely difficult to budget enough time for this kind of tool when
seemingly higher-priority tasks pile up. Right or wrong, the utopian
vision of a living style guide often becomes a foregone luxury in the
throes of looming deadlines.</p>

<p><em>Assumes the reader understands the basics of Ruby and CSS.</em></p>

<!-- more -->


<h2>Middleman</h2>

<p>For an upcoming project at <a href="http://empathylab.com">work</a>, I&rsquo;ll be
leading the effort to author static HTML templates for a different group
of software integrators to wire up to a complex back-end architecture
(rhymes with Shmeb-shmere).</p>

<p>We are also going to be building a whole front-end stack with CSS and
JavaScript to boot, so it makes sense to use a solid static framework to
take the pain away from developing a massive amount of templates without
any server-side help. The bottom line is that we need to be able to
export flat HTML files that work the same as the development templates.</p>

<p>Enter <a href="http://middlemanapp.com">Middleman</a>, a loosely-coupled, yet
carefully curated collection of Ruby libraries that all contribute to a
framework that is much greater than the sum of its parts. I won&rsquo;t go
into all of its features here&thinsp;&mdash;&thinsp;you can visit the
Middleman <a href="http://middlemanapp.com">site</a> for everything you need to
know.</p>

<p>For our purposes, Middleman looks to be a robust platform on which to
build our static site.</p>

<h2>KSS</h2>

<p>I am a closet fan of documentation specs like RubyDoc and JSDoc, but
they often introduce a lot of heavy baggage for developers.
<a href="http://tomdoc.org">TomDoc</a> came on the scene not too long ago as a
really simple doc spec that Githubbers use in their in-house Ruby code,
and I was ecstatic when another Github guy, <a href="http://warpspire.com">Kyle Neath</a>,
released his own <a href="http://github.com/kneath/kss">KSS</a> project in late
2011. I think I&rsquo;ve subconsciously been yearning for this kind of CSS
documentation support for some time.</p>

<p>KSS is a documentation spec for CSS (one of the first of its kind that
I&rsquo;ve heard of) that can be parsed by Ruby. This helps us do things
like&hellip; generating an interactive style guide. It&rsquo;s certainly not a
silver bullet, but KSS will lower some of the administrative barriers to
putting together helpful CSS documentation.</p>

<h2>KSS-ing Middleman</h2>

<p>I thought it would be a good idea to try to port some of the
<a href="https://github.com/kneath/kss/tree/master/example">KSS example app</a>
code over to my basic Middleman app. The example shows several
variations of form submit button styles, including states such as hover
and disabled, which makes for an excellent use case.</p>

<h3>The Styles</h3>

<p>I&rsquo;m using <a href="http://sass-lang.com">Sass</a> and
<a href="http://compass-style.org">Compass</a>, with Middleman, so I did a quick
port of Kyle&rsquo;s example button CSS to Sass with some appropriate Compass
mixins. I found that KSS broke when used with the original terse Sass
format, but it did work fine with the newer SCSS format. I&rsquo;m not
certain, but it&rsquo;s possible that this issue may be resolved in KSS in the
future.</p>

<p>Below is the result of porting the button CSS to <code>_button.scss</code>. The
comment block at the top is where the documentation magic happens. You
just describe what something is, specify a list of different states, and
then reference a numbered section of the style guide. That&rsquo;s it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="c1">// Your standard form button.</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">// :hover    - Highlights when hovering.</span>
</span><span class='line'><span class="c1">// :disabled - Dims the button when disabled.</span>
</span><span class='line'><span class="c1">// .primary  - Indicates button is the primary action.</span>
</span><span class='line'><span class="c1">// .smaller  - A smaller button</span>
</span><span class='line'><span class="c1">//</span>
</span><span class='line'><span class="c1">// Styleguide 5.1.1</span>
</span><span class='line'><span class="nt">button</span> <span class="err">{</span>
</span><span class='line'>  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#f5f5f5</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> background-image</span><span class="p">(</span><span class="nf">linear-gradient</span><span class="p">(</span><span class="mh">#f5f5f5</span><span class="o">,</span> <span class="mh">#e5e5e5</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>  <span class="na">border</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#ddd</span><span class="err">;</span>
</span><span class='line'>  <span class="na">border-bottom-color</span><span class="o">:</span> <span class="mh">#bbb</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> border-radius</span><span class="p">(</span><span class="mi">3</span><span class="kt">px</span><span class="p">)</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> box-shadow</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">4</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="mf">.15</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>  <span class="na">color</span><span class="o">:</span> <span class="mh">#666</span><span class="err">;</span>
</span><span class='line'>  <span class="na">cursor</span><span class="o">:</span> <span class="no">pointer</span><span class="err">;</span>
</span><span class='line'>  <span class="na">font-family</span><span class="o">:</span> <span class="s2">&quot;Helvetica Neue&quot;</span><span class="o">,</span> <span class="n">Helvetica</span><span class="err">;</span>
</span><span class='line'>  <span class="na">font-size</span><span class="o">:</span> <span class="mi">12</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="err">;</span>
</span><span class='line'>  <span class="na">line-height</span><span class="o">:</span> <span class="no">normal</span><span class="err">;</span>
</span><span class='line'>  <span class="na">padding</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span> <span class="mi">15</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> text-shadow</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="mf">.9</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">&amp;</span><span class="nc">.primary</span><span class="o">,</span> <span class="k">&amp;</span><span class="nc">.primary</span><span class="nd">:hover</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="err">;</span>
</span><span class='line'>    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#8add6d</span><span class="err">;</span>
</span><span class='line'>    <span class="k">@include</span><span class="nd"> background-image</span><span class="p">(</span><span class="nf">linear-gradient</span><span class="p">(</span><span class="mh">#8add6d</span><span class="o">,</span> <span class="mh">#60b044</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>    <span class="na">border-color</span><span class="o">:</span> <span class="mh">#74bb5a</span><span class="err">;</span>
</span><span class='line'>    <span class="na">border-bottom-color</span><span class="o">:</span> <span class="mh">#509338</span><span class="err">;</span>
</span><span class='line'>    <span class="k">@include</span><span class="nd"> box-shadow</span><span class="p">(</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">4</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="mf">.2</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>    <span class="k">@include</span><span class="nd"> text-shadow</span><span class="p">(</span><span class="mi">0</span> <span class="mi">-1</span><span class="kt">px</span> <span class="mi">0</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="mf">.4</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nc">.smaller</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">font-size</span><span class="o">:</span> <span class="mi">11</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>    <span class="na">padding</span><span class="o">:</span> <span class="mi">4</span><span class="kt">px</span> <span class="mi">7</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">color</span><span class="o">:</span> <span class="mh">#337797</span><span class="err">;</span>
</span><span class='line'>    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#f0f7fa</span><span class="err">;</span>
</span><span class='line'>    <span class="k">@include</span><span class="nd"> background-image</span><span class="p">(</span><span class="nf">linear-gradient</span><span class="p">(</span><span class="mh">#f0f7fa</span><span class="o">,</span> <span class="mh">#d8eaf2</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>    <span class="na">border-color</span><span class="o">:</span> <span class="mh">#cbe3ee</span><span class="err">;</span>
</span><span class='line'>    <span class="na">border-bottom-color</span><span class="o">:</span> <span class="mh">#97c7dd</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:disabled</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="mf">.5</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You actually <em>do</em> need to manage the numeric structure of the style guide
yourself. However, I appreciate that KSS makes you maintain control over
the meaningful aspects of organizing a style guide, while making it
possible to automate the tedious parts.</p>

<h3>The Config</h3>

<p>For the style guide to look nice on the front end, there is also a small
amount of boilerplate CSS and JavaScript code to make some of the magic
happen, so I pulled those files in and called them from a separate
layout, <code>layouts/styleguide.erb</code>.</p>

<p>The KSS example app runs on Sinatra, and Middleman also basically runs
on Sinatra with some abstractions on top, so setting up the
configuration wasn&rsquo;t too tough. After adding <code>gem "kss", "~&gt; 0.1.1"</code> to
the Gemfile and running <code>bundle install</code>, I added the following to
Middleman&rsquo;s <code>config.rb</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;kss&quot;</span>
</span><span class='line'><span class="n">page</span> <span class="s2">&quot;/styleguide/*&quot;</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="ss">:styleguide</span> <span class="k">do</span>
</span><span class='line'>  <span class="vi">@styleguide</span> <span class="o">=</span> <span class="no">Kss</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;source/css&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">helpers</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># Generates a styleguide block.</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">styleguide_block</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@section</span> <span class="o">=</span> <span class="vi">@styleguide</span><span class="o">.</span><span class="n">section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@example_html</span> <span class="o">=</span> <span class="n">kss_capture</span><span class="p">{</span> <span class="n">block</span><span class="o">.</span><span class="n">call</span> <span class="p">}</span>
</span><span class='line'>    <span class="vi">@_out_buf</span> <span class="o">&lt;&lt;</span> <span class="n">partial</span><span class="p">(</span><span class="s1">&#39;styleguide/block&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Captures the result of a block within an erb template without spitting it</span>
</span><span class='line'>  <span class="c1"># to the output buffer.</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">kss_capture</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="n">out</span><span class="p">,</span> <span class="vi">@_out_buf</span> <span class="o">=</span> <span class="vi">@_out_buf</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="k">yield</span>
</span><span class='line'>    <span class="vi">@_out_buf</span>
</span><span class='line'>  <span class="k">ensure</span>
</span><span class='line'>    <span class="vi">@_out_buf</span> <span class="o">=</span> <span class="n">out</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>For all style guide templates, the above configuration exposes a
variable containing a Ruby representation of all KSS-documented CSS in
the site (because KSS parses all documentation blocks in the CSS). A
couple of helpers are defined that the templates will have access to, in
order to handle the generated style guide block.</p>

<p><em>Due to a bug in Middleman 3.0 beta, wildcard file paths did not set
local variables correctly. This bug should be resolved in 3.0 final.
Additionally, I suspect that the </em><code>kss_capture</code><em> helper is not exactly
optimal for use with Middleman, but I haven&rsquo;t taken the time to refactor
the example code beyond simply getting it working. It was originally
named </em><code>capture</code><em> in the example, but I renamed it to prevent conflicts
with the existing Middleman </em><code>capture</code><em> helper, which I would have
probably tried to use if it was available inside the config file.</em></p>

<h3>The Templates</h3>

<p>A partial template needs to be defined for rendering every style guide
section. The template will be used by the <code>styleguide_block</code> helper
defined in the config above: <code>styleguide/_block.erb</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="x">&lt;div class=&quot;styleguide-example&quot;&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="x">  &lt;h3&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@section</span><span class="o">.</span><span class="n">section</span> <span class="cp">%&gt;</span><span class="x"> &lt;em&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@section</span><span class="o">.</span><span class="n">filename</span> <span class="cp">%&gt;</span><span class="x">&lt;/em&gt;&lt;/h3&gt;</span>
</span><span class='line'><span class="x">  &lt;div class=&quot;styleguide-description&quot;&gt;</span>
</span><span class='line'><span class="x">    &lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@section</span><span class="o">.</span><span class="n">description</span> <span class="cp">%&gt;</span><span class="x">&lt;/p&gt;</span>
</span><span class='line'><span class="x">    </span><span class="cp">&lt;%</span> <span class="k">if</span> <span class="vi">@section</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">any?</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">      &lt;ul class=&quot;styleguide-modifier&quot;&gt;</span>
</span><span class='line'><span class="x">        </span><span class="cp">&lt;%</span> <span class="vi">@section</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">modifier</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">          &lt;li&gt;&lt;strong&gt;</span><span class="cp">&lt;%=</span> <span class="n">modifier</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">&lt;/strong&gt; - </span><span class="cp">&lt;%=</span> <span class="n">modifier</span><span class="o">.</span><span class="n">description</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
</span><span class='line'><span class="x">        </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">      &lt;/ul&gt;</span>
</span><span class='line'><span class="x">    </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">  &lt;/div&gt;</span>
</span><span class='line'><span class="x">  &lt;div class=&quot;styleguide-element&quot;&gt;</span>
</span><span class='line'><span class="x">    </span><span class="cp">&lt;%=</span> <span class="vi">@example_html</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">  &lt;/div&gt;</span>
</span><span class='line'><span class="x">  </span><span class="cp">&lt;%</span> <span class="vi">@section</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">modifier</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">    &lt;div class=&quot;styleguide-element styleguide-modifier&quot;&gt;</span>
</span><span class='line'><span class="x">      &lt;span class=&quot;styleguide-modifier-name&quot;&gt;</span><span class="cp">&lt;%=</span> <span class="n">modifier</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">&lt;/span&gt;</span>
</span><span class='line'><span class="x">      </span><span class="cp">&lt;%=</span> <span class="vi">@example_html</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;$modifier_class&#39;</span><span class="p">,</span> <span class="s2">&quot; </span><span class="si">#{</span><span class="n">modifier</span><span class="o">.</span><span class="n">class_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">    &lt;/div&gt;</span>
</span><span class='line'><span class="x">  </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'>
</span><span class='line'><span class="x">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>In <code>styleguide/buttons.html.erb</code>, I added the following template call:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="cp">&lt;%</span> <span class="n">styleguide_block</span> <span class="s1">&#39;5.1.1&#39;</span> <span class="k">do</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">  &lt;button class=&quot;$modifier_class&quot;&gt;Default Button&lt;/button&gt;</span>
</span><span class='line'><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that there is a single <code>button</code> element in the block. This is where
the magic happens, because it passes the <code>button</code> to <code>styleguide_block</code>,
which imports the <code>styleguide/block</code> partial for the style guide section.</p>

<p>The partial parses the KSS representation of the documented CSS for the
given section of the style guide (5.1.1). It prints out the section
number and SCSS filename, adds the documentation text to the page,
cycles through each CSS modifier of <code>button</code>, and generates a new
<code>&lt;button&gt;</code> tag for each modifier. The resulting section of the style
guide will look like this:</p>

<p><img src="/images/2012-01-10-kss-and-middleman/styleguide.png" title="Style guide example" ></p>

<p>The original basic <code>button</code> element is listed first, followed by
accurate examples of all of its documented modifiers. The KSS JavaScript
file fakes the pseudo-selectors <code>:hover</code> and <code>:disabled</code>.</p>

<h2>Onward</h2>

<p>For my project, at least, this is an encouraging proof-of-concept that I
plan to take forward. In the meantime, it looks like there is a generous
amount of potential in both Middleman and KSS, so be sure to check out
each of these projects.</p>

<p>If you have used either Middleman or KSS, what has your experience been
like thus far?</p>

<h2>Update 2012-02-04</h2>

<p>I have pushed my working code to a <a href="http://github.com/smt/middleman-kss">Github repo</a>.
Some of the gems are a little out of date, but I wanted to get my
initial version up first, and then work through any issues that might
arise from updating libraries. Please let me know what you think; I&rsquo;m
always open to suggestions for improvement.</p>

<p>After checking out the code, just run <code>middleman</code> like any other
Middleman app, and browse to <code>http://localhost:4567</code>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Stephen Tudor</span></span>

      








  


<time datetime="2012-01-10T15:11:00-05:00" pubdate data-updated="true">Jan 10<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/code/'>code</a>, <a class='category' href='/blog/categories/css/'>css</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>, <a class='category' href='/blog/categories/sass/'>sass</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/08/04/10-vim-techniques-for-novices.html" title="Previous Post: 10 Vim Techniques for Novices">&laquo; 10 Vim Techniques for Novices</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/10/07/developers-are-artists.html" title="Next Post: Developers Are Artists">Developers Are Artists &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About the Tude</h1>
  <p>
    <img class="left" src="http://www.gravatar.com/avatar/5de6eade9b61a1ea85aa936c4b703672?s=64" title="Stephen&rsquo;s avatar" >

    I am Stephen Tudor, a creative web developer living in the greater Philadelphia&nbsp;area.
  </p>
  <p>
    I currently work for <a href="http://ebayenterprise.com">eBay&nbsp;Enterprise</a>. My
    opinions are my own, and not necessarily those of my&nbsp;employer.
  </p>
  
    <p>
    
      <a href="http://twitter.com/tagsoup" class="twitter-follow-button" data-show-count="">Follow @tagsoup</a>
    
    </p>
  
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/11/gulp-and-browserify.html">Gulp and Browserify</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/19/emergent-task-planner.html">Emergent Task Planner</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/17/year-in-review.html">Year in Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/07/developers-are-artists.html">Developers Are Artists</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/10/kss-and-middleman.html">KSS and Middleman</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Stephen Tudor -
  <span class="gpg">GPG: <a href="https://raw.githubusercontent.com/smt/smt.github.io/master/pubkey.txt" title="GnuPG Public Key for Stephen Tudor">3CE8EE52</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
